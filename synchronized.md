###偏向锁

JDK 6 引入的偏向锁优化，如果是同一个线程用一个锁对象，如果是轻量级锁，锁的重入会不停的进行 CAS 操作，会有性能损耗，而偏向锁只需要记录第一次使用的ThradId，下次使用只做判断是否是同一个
ThradId,如果是直接使用，不是就撤销锁，升级成轻量级锁

偏向锁默认开启，4s延迟，mark word 中记录的是 ThradId, biased_lock,最后三位101
可以通过 XX：BiasedLockingStartupDelay=0 禁用延迟

#### 偏向锁的撤销
调用原生 HashCode 方法，会使偏向锁撤销，无论是加锁前后使用，都会撤销，Mard Word 存储的是 HashCode 的值，猜测没有位置存储 ThreadId 
- 其他线程使用该对象
- 调用 wait/notify 

#### 批量重偏向
第一次使用该锁的时候，会将thredId写入mark word中，当出现错开使用该对象（无竞争）会让该锁升级成轻量级锁，并且进行锁的撤销，当这个撤销次数达到20次的时候，会进行锁的批量重定向

#### 批量撤销
当撤销次数达到40次，该锁对象转成不可偏向状态，包括该类新创建的对象也无法偏向

####锁消除
JIT 即时编译器的优化



