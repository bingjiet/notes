JMM
定义了主存，工作内存的抽象概念，底层对应着 CPU 寄存器、缓存、硬件内存、CPU 指令优化等

JMM
- 原子性，保证指令不会受到线程上下文切换的影响
- 可见性，保证指令不会受 cpu 缓存的影响
- 有序性，保证指令不会受 cpu 指令并行优化的影响

volatile
可以用来修饰成员变量和静态变量，避免线程从工作内存中读取共享变量，必须到主存中读取共享变量，线程操作volatile变量都是操作主内存的

syn
也可以保证可见性

指令重排
在不影响结果的前提下，进行指令重排序
```java
public void m1() {
  num = 2;
  flag = true;
}

//发生指令重排序
public void m1() {
  flag = true
  num = 2;
}
```
